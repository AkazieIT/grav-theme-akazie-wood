{% extends 'partials/base.html.twig' %}
{% import 'partials/cascade-filters.html.twig' as f %}
{% set queries = uri.query(null, true) %}
{% if queries is empty %}
    {% set collection = page.children %}
{% else %}
    {% set collection = taxonomy.findTaxonomy(queries) %}
{% endif %}

{% block content %}
<section class="page section-default">
<div class="row">
  <article class="modular section-angebotetext col-12 col-md-8">
    {% if page.header.showtitle == 1 %}<h2 class="heading">{{ page.header.title }}</h2>{% endif %}
    <div class="markdown {% if page.header.showtitle == 2 %}title-placeholder{% endif %}">
      {{ page.content|raw }}
    </div>

  </article>
</div>
</section>
<section class="page section-default">
<div class="row">
<div class="sidebar column is-narrow catfiltercontainer" id="catcont">
	{% set taxlist = cascadeFilters.get() %} {# get texonomy list #}
	{% set queries = uri.query(null, true) %} {# get queries as Array #}
	{% if taxlist %}
		{% for key, values in taxlist %}
    <div class="catfilterwrap">
    {#
    {% if (key == 'as' or key == 'zimmer') %}
			<p>
				{{ key }}
			</p>
    {% endif %}
    #}
			<ul class="is-clearfix catfilter">
				{% for tax in values|keys %}
					<li>
						{{ f.genQueryUrl(queries|sort,key,tax, page.url, cascadeFilters) }}
					</li>
				{% endfor %}
			</ul>
      </div>
		{% endfor %}
	{% endif %}

	<a href="{{ page.url }}" class="button filterreset">Reset</a>
</div>
</div>
</section>

  <section class="page section-default oz-itemcontainer">

    {% for child in collection %}
          {% include 'partials/cat_item.html.twig' with {'blog':page, 'page':child, 'truncate':true} %}
      {% endfor %}
  </section>
{% endblock %}
